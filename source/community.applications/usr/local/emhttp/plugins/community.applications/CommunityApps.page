Menu="Apps"
Icon="community.applications.png"
Title="Community Applications"
Tag="users"
---
<?
###############################################################
#                                                             #
# Community Applications copyright 2015-2020, Andrew Zawadzki #
#          Licenced under the terms of GNU GPLv2              #
#                                                             #
###############################################################

$docroot = $docroot ?? $_SERVER['DOCUMENT_ROOT'] ?: "/usr/local/emhttp";
$plugin = "community.applications";

require_once "$docroot/plugins/$plugin/include/paths.php";
require_once "$docroot/plugins/$plugin/include/helpers.php";

$cfg = parse_plugin_cfg($plugin);
if ( ! is_file($caPaths['warningAccepted']) ) {
	$firstRun = "true";
}
if ( ! is_file($caPaths['pluginWarning']) ) {
	$pluginWarning = "false";
}

$unRaidSettings = parse_ini_file($caPaths['unRaidVersion']);
$unRaid66 =       version_compare($unRaidSettings['version'],"6.5.3",">");
$unRaid68 =       version_compare($unRaidSettings['version'],"6.7.9",">");
$unRaid69 =       version_compare($unRaidSettings['version'],"6.8.2",">");
$translations =   is_file("$docroot/plugins/dynamix/include/Translations.php");
$unRaid69B2 =     version_compare($unRaidSettings['version'],"6.9.0-beta1",">");
if ( $unRaid69B2 ) {
	switch ($theme) {
		case 'black':
			$swalBackground = "#1c1b1b";
			break;
		case 'azure':
			$swalBackground = "#e4e2e4";
			break;
		case 'gray':
			$swalBackground = "#1b1d1b";
			break;
		case 'white':
			$swalBackground = "#f2f2f2";
			break;
		default:
			$swalBackground = "#1c1b1b"; // default to black
			break;
	}
}	else {
	$swalBackground = "white";
}

if ( is_file($caPaths['addConverted']) ) {
	$dockerConvertFlag = "true";
}
$date = (date("n/d"));

if ( $translations ) {
	$ca_txt = "$docroot/languages/$locale/javascriptapps.txt";
	$ca_dot = "$docroot/languages/$locale/javascriptapps.dot";
	if ( file_exists($ca_txt) ) {
		if ( !file_exists($ca_dot) ) file_put_contents($ca_dot,serialize(parse_lang_file($ca_txt)));
		$language = array_merge($language,unserialize(file_get_contents($ca_dot)));
	}
}

function tr($string,$ret=false) {
	if ( function_exists("_") )
		$string =  str_replace('"',"&#34;",str_replace("'","&#39;",_($string)));
	if ( $ret )
		return $string;
	else
		echo $string;
}

?>
<? if ( ! $unRaid69 ):?>
<meta name="referrer" content="same-origin">
<?endif;?>
<link type='text/css' rel='stylesheet' href="<?=autov("/plugins/$plugin/skins/Narrow/css.php")?>" >
<? if ( is_file("$docroot/plugins/dynamix/styles/community.applications-$theme.css") ):?>
<link type='text/css' rel='stylesheet' href='<?=autov("/plugins/dynamix/styles/community.applications-$theme.css")?>'>
<? endif; ?>

<script src='<?autov("/plugins/community.applications/javascript/libraries.js")?>'></script>
<script>

var searchBoxInput;
var searchBoxAwesomplete;
var pluginInstallIntervalTimer;

var data = new Object();
data.docker = "";
data.section = "AppStore";
data.selected_category = "";
data.subcategory = "";
data.selected_subcategory = "";
data.selected = "";
data.lastUpdated = 0;
data.nextpage = 0;
data.prevpage = 0;
data.currentpage = 1;
data.searchFlag = false;
data.searchActive = false; // Sets whether changepage re-sorts the displayed templates.
var dockerSearchFlag = false;
var dockerNotEnabled;
var postCount = 0;
var cookieWarning = false;
var dockerWarningAdded = false;
var backupServerWarning = false;
var restoreStateMenu = false;

$(function(){
	caPluginUpdateCheck("community.applications.plg",{
			noDismiss:true,
			name:"Community Applications",
			debug:false,
			priority:true
		},function(result) {
			var result = JSON.parse(result);
			$("#caInstalledVersion").html(result.installedVersion);
		}
	);

	$("#title").append('<div id="Category" class="categoryLine ca_italic"></div>');
	$("#title").append("<div class='searchArea'><span id='sortIconArea' style='display:none;'><i class='sortIcons fa fa-sort-alpha-asc enabledIcon ca_staticTips' title='"+tr("Sort By Name Ascending")+"' data-sort='nameUp'></i><i class='sortIcons fa fa-sort-alpha-desc ca_staticTips' title='"+tr("Sort By Name Descending")+"' data-sort='nameDown'></i><i class='sortIcons fa fa-sort-numeric-desc ca_staticTips' title='"+tr("Sort By Downloads")+"' data-sort='downloadsDown'></i><i class='sortIcons fa fa-sort-amount-desc ca_staticTips' title='"+tr("Sort By Trend")+"' data-sort='trendDown'></i><i class='sortIcons fa fa-calendar ca_staticTips' title='"+tr("Sort By Date Added")+"' data-sort='firstSeenDown'></i></span><span id='sortIcon' class='fa fa-sort ca_toolsView disabledIcon'> <span class='fa-sort-alpha-asc'></span></span>&nbsp;<span id='searchFilter' class='status' style='margin-top:-1rem;'><input type='text' id='searchBox' placeholder='"+tr('Search')+"' autofocus><button class='searchSubmit' style='margin-right:10px' onclick='doSearch(true)'><i id='searchButton' class='fa fa-search fa-lg'></i></button></div>");

	searchBoxInput = document.getElementById("searchBox");
	searchBoxAwesomplete = new Awesomplete(searchBoxInput);

	if ( "<?=$date?>" == "12/24" ) addBannerWarning("<i style='float:initial;cursor:initial;' class='fa fa-snowflake-o'></i> "+tr("Happy Holidays from Andrew, Tracey, and family")+" <i style='float:initial;cursor:initial;' class='fa fa-snowflake-o'></i>",false);
	if ( "<?=$date?>" == "12/25" ) addBannerWarning("<i style='float:initial;cursor:initial;' class='fa fa-snowflake-o'></i> "+tr("Happy Holidays from Andrew, Tracey, and family")+" <i style='float:initial;cursor:initial;' class='fa fa-snowflake-o'></i>",false);
	if ( "<?=$date?>" == "1/01" )  addBannerWarning(tr("Happy New Year!"),false);
	if ( "<?=$date?>" == "12/31" ) addBannerWarning(tr("Happy New Year!")+" <i style='float:initial;cursor:initial;' class='fa fa-beer'></i> "+tr("Please Enjoy Responsibly"),false);

	$('.ca_toolsView').tooltipster({
		trigger: 'hover',
		delay: [1000,0],
		animation: 'fade',
		triggerClose: {mouseleave:true},
		functionBefore: function(instance,helper){
			if ( isIconEnabled("#sortIcon") ) {
				instance.content(tr("Sorting options"));
			} else {
				instance.content(tr("Sorting options unavailable"));
			}
		}
	});

	$('.ca_staticTips').tooltipster({
		contentAsHTML:true,
		delay:[1000,1],
		timer:15000,
		animation:'none',
		arrow:true,
		trigger:'custom',
		triggerOpen:{mouseenter: true, hover: true},
		triggerClose:{click:true,scroll:true,mouseleave:true}
	});

	$("#searchBox").keydown(function(e) {
		if (e.which === 13) {
			doSearch();
		}
	});

	$('.caChangeLog').on("click",function() {disableSort();scrollToTop();caChangeLog();});
	$('.mainArea').on("click",'.ca_multiselect',function() {enableMultiInstall();});
	$('.mainArea').on("click",".ca_appPopup",function() {
		var appnumber = $(this).data("appnumber");
		var apppath = $(this).data("apppath");
		var appname = $(this).data("appname");
		var beta = " "+$(this).data("beta");
		appname = stripTags(appname);
		showDesc_openBox("/plugins/community.applications/scripts/showDesc.php?appNumber="+appnumber+"&appPath="+apppath+"&appName="+appname+"'",appname+beta,450,650,true,"checkForPluginInstallRequested()");
	});

	$('.mainArea').on("click",".unpinned,.pinned",function() {
		var repository = $(this).data("repository");
		var name = $(this).data("name");
		pinApp(this,repository,name);
	});

	$('.mainArea').on("click",".xmlInstall",function() {
		var type = $(this).data("type");
		var xml = $(this).data("xml");
		xmlInstall(type,xml);
	});

	$('.menuItems').on("click",'.categoryMenu',function() {
		scrollToTop();
		changeCategory(this,false);
	});
	$('.menuItems').on("mouseover",".caMenuItem",function() {
		$(this).addClass("hoverMenu");
	});
	$('.menuItems').on("mouseleave",".caMenuItem",function() {
		$(this).removeClass("hoverMenu");
	});
	$('.menuItems').on("click",".caMenuItem",function() {
		if ( $(this).hasClass("selectedMenu") ) {
			return;
		}
		if ( ! $(this).parent().hasClass("subCategory") ) {
			$(".subCategory").hide();
		}
		$(".caMenuItem").removeClass("selectedMenu");
		$(this).addClass("selectedMenu");
		$(this).next().show();
	});

	$(".sectionMenu").on("click",function() {
		var section = $(this).attr("data-category");
		switch (section) {
			case "installed_apps":
				previousApps(true);
				break;
			case "previous_apps":
				previousApps(false);
				break;
			case "pinned_apps":
				pinnedApps();
				break;
		}
	});

	$(".initDockerSearch").click(function()     { initDockerSearch(); });
	$(".multi_installButton").click(function()  { installMulti(); });
	$(".multi_installClear").click(function()   { clearMultiInstall(); });
	$(".startupButton").click(function()        { updateContent(this); });
	$("#sortIcon").click(function() {
		if ( isIconEnabled("#sortIcon") ) {
			$("#sortIconArea").toggle("slow");
		}
	});
	$(".sortIcons").click(function() {
		enableSortIcon(this);
		data.currentpage = 1;
		data.searchActive = false;
		changeSortOrder();
		$("#sortIconArea").toggle("slow");
		var classList = $(this).attr('class').split(/\s+/);
		$.each(classList, function(index, item) {
			if ( item.startsWith("fa-") ) {
				$("#sortIcon").html("&nbsp;<span class="+item+"></span>");
			}
		});
	});
	$('.mainArea').on("click",".languageSwitch",function() {
		CAswitchLanguage($(this).data("language"));
	});
	$('.mainArea').on("click",".languageInstall",function() {
		installLanguage($(this).data("language_xml"),$(this).data("language"));
	});
	$('.mainArea').on("click",".languageRemove",function() {
		removeLanguage($(this).data("language"));
	});
	$('.mainArea').on("click",".languageUpdate",function() {
		updateLanguage($(this).data("language"));
	});
<?if ( ! $unRaid66 ):?>
	$("html").css("font-size","10px");
<?endif;?>
	/* Everything is now initialized.  This is the start of the actual "real" code */
	if ( "<?=$firstRun?>" == "true" ) {
	  $(".ca_templatesDisplay").hide();
		swal({
			title: tr("Disclaimer"),
			text: tr('All applications listed here are 3rd party additions to Unraid.  Neither the authors of Community Applications nor Limetech make any warranty as to the suitability of any application listed here')+' <br><span class="ca_italic"><font color="green">'+tr('Every attempt is made to ensure that only safe and compatible applications are present')+'</font></span><br><br><center><a href="https://forums.unraid.net/topic/87144-ca-application-policies/" target="_blank">'+tr('Application Policy')+'</a>',
			html: true,
			type: 'warning',
			showCancelButton: true,
			showConfirmButton: true,
			cancelButtonText: tr('Cancel'),
			confirmButtonText: tr('I Understand')
		}, function (isConfirm) {
			if ( isConfirm ) {
				post({action:'dismiss_warning'},function(result) {
					location.reload();
				});
			} else {
			$(".ca_templatesDisplay").show();
				addBannerWarning(tr("Installations of apps disabled.  You must accept the warning to be able to install applications.")+"   <a onclick='window.location.reload();' style='cursor:pointer;'>"+tr("Click here")+"</a>",true,true);
				updateContent();
			}
		});
	} else if ( "<?=$pluginWarning?>" == "false" ) {
		$(".ca_templatesDisplay").hide();
		swal({
			title: tr('Plugins'),
			text: tr('Community Applications contains both docker containers and plugin applications.  Plugins are designed for OS enhancements, and run with full privileges on your system and are clearly identified within CA.')+'<br><br><center><a href="https://forums.unraid.net/topic/87144-ca-application-policies-notes/?tab=comments#comment-817555" target="_blank">'+tr('Plugin Note')+'</a></center>',
			type: 'warning',
			html: true,
			showCancelButton: false,
			showConfirmButton: true,
			confirmButtonText: tr("I Understand")
		}, function (isConfirm) {
			if (isConfirm) {
				post({action:'dismiss_plugin_warning'},function(result) {
					location.reload();
				});
			}
		});
	} else {
		if ( (document.referrer.indexOf("/Apps/") > 1) && ( document.referrer.indexOf("/Apps/ca_settings") < 1 ) && cookiesEnabled() && ("<?=$dockerConvertFlag?>" != "true") || $.cookie("ca_languageSwitch") ) {
			restoreState();
			refreshDisplay();
		} else {
			updateContent();
		}
	}
});

function disableSort() {
	hideSortIcons();
	enableIcon("#sortIcon",false);
}
function hideSortIcons() {
	$("#sortIconArea").hide("slow");
}

function updateContent(button) {
	hideSortIcons();
	clearSearchBox();
	clearCategory();
	$(".caMenuItem").removeClass("selectedMenu");
	$(".subCategory").hide();

	startupScreen = $.cookie("ca_startupButton") ? $.cookie("ca_startupButton") : "onlynew";
	$(".caMenuItem[data-category='"+startupScreen+"']").addClass("selectedMenu");

	startupScreen = button ? $(button).data("category") : startupScreen;
	$.cookie("ca_startupButton",startupScreen,{expires:365});
	$.cookie("ca_selectedMenu",startupScreen,{expires:365});
	disableSearch();

	post({action:'force_update'}, function(result) {
		if ( $.cookie("ca_plugininstallpending" || ! button ) ) {
			var plugins = $.cookie("ca_plugininstallpending");
			$.removeCookie("ca_plugininstallpending");
			myCloseAlert();
			openBox('/plugins/<?=$plugin?>/scripts/installMultiPlugin.sh&arg1='+plugins,tr('Install Plugin Applications'),600,900,true);
		} else {
			if ( result.data ) {
				updateDisplay(result.data);
			} else {
				data.searchActive = true;
				getContent(true,'INITIALIZE',"","",startupScreen);
			}
		}
		getCategories();
	});
}

function enableSortIcon(icon) {
	$(".sortIcons").removeClass("enabledIcon");
	$(icon).addClass("enabledIcon");
}

function enableIcon(icon,enable) {
	enable = (enable == "false") ? false : enable;
	$(icon).each(function() {
		$(this).removeClass("enabledIcon disabledIcon");
		var newClass = enable ? "enabledIcon" : "disabledIcon";
		$(this).addClass(newClass);
	});
}

function isIconEnabled(icon) {
	return $(icon).hasClass("enabledIcon");
}

function stripTags(string) {
	return string.replace(/(<([^>]+)>)/ig,"");
}

function setToolTip() {
	$('.ca_tooltip').tooltipster({
		contentAsHTML:true,
		delay:[1000,1],
		timer:15000,
		animation:'none',
		arrow:true,
		trigger:'custom',
		triggerOpen:{mouseenter: true},
		triggerClose:{click:true,scroll:true,mouseleave:true}
	});
	$('.ca_tooltip-warning').tooltipster({
		contentAsHTML:true,
		interactive:true,
		trigger:'custom',
		triggerOpen:{click: true, mouseenter: true},
		triggerClose:{click:true,scroll:true,mouseleave:true}
	});
}

// Wait for the showDesc modal to close before opening another to install plugin
function checkForPluginInstallRequested() {
	var pluginURL = $.cookie("ca_installPluginURL");
	var language = $.cookie("ca_languageSwitch");
	if ( pluginURL ) {
		pluginInstallIntervalTimer = setInterval(modalPluginInstall,100);
	}
	if ( language ) {
		CAswitchLanguage(language);
	}

}

function modalPluginInstall() {
	if ( ! $("#sb-container").is(":visible") ) {
		clearInterval(pluginInstallIntervalTimer);
		var pluginURL = $.cookie("ca_installPluginURL");
		$.removeCookie("ca_installPluginURL");
		if ( pluginURL.toLowerCase().indexOf("http") !== 0 ) { // not a URL, so assume its a country code
		  updateLanguage(pluginURL);
		} else {
			if ( pluginURL.indexOf(".xml") > 1 ) {
				var language = pluginURL.basename().replace(".xml","");
				installLanguage(pluginURL,language);
			} else {
				installPlugin(pluginURL);
			}
		}
	}
}

function showSpecialCategory(button) {
	$(".caMenuItem").removeClass("selectedMenu");
	$(".multi_installDiv").hide();
	data.selected_category = "DOESNTMATTERWHATSHERE";
	data.section = "AppStore";
	changeCategory(button,false);
}

function changeCategory(button,subSwitch) {
	var description = $(button).text();
	var category = $(button).attr("data-category");
	data.searchActive = false;
	clearSearchBox();
	hideSortIcons();
	clearCategory();
	$(".multi_installDiv").hide();
	getContent(false,category,description,false);
}

function changePage(pageNumber) {
	var sortOrder = getSortOrder();
	if ( data.searchActive ) {
		sortOrder = [["sortBy","noSort"]];
	}
	var selected = data.selected;
	data.currentpage = pageNumber;

	var oldHeight = $(".ca_templatesDisplay").height();
	$(".ca_templatesDisplay").css("height",oldHeight);
	hideSortIcons();
	post({action:'display_content',sortOrder:sortOrder,pageNumber:pageNumber,selected:selected},function(result) {
		updateDisplay(result.display);
		$(".ca_templatesDisplay").css("height","auto");
	});
}

function swalBackground(color) {
	$(".sweet-alert").css("background-color",color);
}

function myAlert(description,textdescription,textimage,imagesize, outsideClick, showCancel, showConfirm, alertType) {
	if ( !outsideClick ) outsideClick = false;
	if ( !showCancel )   showCancel = false;
	if ( !showConfirm )  showConfirm = false;
	if ( imagesize == "" ) { imagesize = "80"; }
	disableSearch();

	swal({
		title: description,
		text: textdescription,
		allowOutsideClick: outsideClick,
		showConfirmButton: showConfirm,
		showCancelButton: showCancel,
		cancelButtonText: tr("Cancel"),
		type: alertType,
		animation: false,
		html: true
	});
}

function mySpinner() {
	$("div.spinner").show();
	swalBackground("transparent");
	swal({
		title: "",
		text: "",
		allowOutsideClick: false,
		showConfirmButton: false,
		showCancelButton: false,
		animation: false,
		html: true
	});
	swalBackground("transparent"); // Occasional race condition where swal is not initialized at time the initial background change happens

}
function myCloseSpinner() {
	swal.close();
	$("div.spinner, .sweet-alert").hide();
	swalBackground("<?=$swalBackground?>");
}

function myCloseAlert() {
	swal.close();
	swalBackground("transparent");
	enableSearch();
}

function doSearch(button,newSearch) {
	searchBoxAwesomplete.close();
	hideSortIcons();

	if ( ! newSearch === false ) {
		$('#searchBox').val(newSearch);
	}
	var filter = $('#searchBox').val();
	if ( button && ! filter) {
		$("#searchBox").attr("placeholder",tr("Please enter search term"));
		return;
	} else {
		$("#searchBox").attr("placeholder",tr("Search"));
	}
	data.docker = "";
	data.section = "AppStore";
	filter = filter.replace(/[^a-z0-9-]/gi,' ')
	filter = $.trim(filter);
	$('#searchBox').val(filter);
	$(".multi_installDiv").hide();

	if ($('#searchButton').hasClass('fa-search')) {
		if (filter) {
			$('#searchButton').toggleClass('fa-search fa-remove');
		}
	} else if (button) {
		clearSearchBox();
		filter = '';
	} else {
		if (!filter) {
			return;
		}
	}

	scrollToTop();
	if (filter) {
		$("#Category").html(sprintf(tr("Search for %s"),filter));
		enableIcon("#sortIcon",true);
		data.searchFlag = true;
	} else {
		updateContent();
		data.searchFlag = false;
		return;
	}
	data.searchActive = true;
	var sortOrder = getSortOrder();
	if ( "<?=$cfg['dockerSearch']?>" == "yes" && ! dockerNotEnabled) {
		$('.dockerSearch').show();
	}
	post({action:'get_content',filter:filter,sortOrder:sortOrder},function(result) {
		enableButtons();
		updateDisplay(result.display);
		data.section = "AppStore";
		$(".selectedMenu").removeClass("selectedMenu");
		$(".subCategory").hide();
	});
}

function enableButtons() {
	data.selected_category = "";
}

function refreshDisplay() {
	changeSortOrder(null,null,null);
}

function changeSortOrder(button,buttonClass,previousApps) {
	var pageNumber = data.currentpage;
	var selected = data.selected;
	var sortOrder = getSortOrder();
	var startup = false;
	if ( button || buttonClass || previousApps) {
		data.searchActive = false;
	}
	if ( data.searchActive ) {
		sortOrder = [["sortBy","noSort"]];
	}
	$(".startupButton").each(function(){
		if ($(this).hasClass("selectedMenu")) {
			startup = "true";
		}
	});
	post({action:'display_content',sortOrder:sortOrder,pageNumber:pageNumber,selected:selected,startup:startup},function(result) {
		updateDisplay(result.display);
	});
}

function getSortOrder() {
	var sortOrder = new Object();

	$(".sortIcons").each(function() {
		if ( isIconEnabled(this) ) {
			switch ( $(this).data("sort") ) {
				case 'nameUp':
					sortOrder.sortBy = ["sortBy","Name"];
					sortOrder.sortDir = ["sortDir","Up"];
					break;
				case 'nameDown':
					sortOrder.sortBy = ["sortBy","Name"];
					sortOrder.sortDir = ["sortDir","Down"];
					break;
				case 'downloadsDown':
					sortOrder.sortBy = ["sortBy","downloads"];
					sortOrder.sortDir = ["sortDir","Down"];
					break;
				case 'trendDown':
					sortOrder.sortBy = ["sortBy","trending"];
					sortOrder.sortDir = ["sortDir","Down"];
					break;
				case 'firstSeenDown':
					sortOrder.sortBy = ["sortBy","FirstSeen"];
					sortOrder.sortDir = ["sortDir","Down"];
					break;
			}
		}
	});
	if ( ! sortOrder.sortBy ) {
		if ( ! isIconEnabled("#sortIcon")) {
			sortOrder.sortBy = ["sortBy","noSort"];
		} else {
			sortOrder.sortBy = ["sortBy","Name"];
			sortOrder.sortDir = ["sortDir","Up"];
			var sortIcon = $.find(".sortIcons[data-sort='nameUp']");
			$(sortIcon).addClass("enabledIcon");
		}
	}
	return [sortOrder.sortBy,sortOrder.sortDir];
}

function getContent(init,category,description,newApp,startupDisplay) {
	data.currentpage = 1;
	var initialize;

	enableSearch();
	enableIcon("#sortIcon", ! init);

	if ( category != "NONE" ) {
		if ( category == "INITIALIZE" ) {
			initializeAppStore();
			category = "NONE";
			initialize = true;
			enableButtons();
		}
		if ( (category == "New") || (category == "All") ) { category = ""; }

		data.searchActive = false;
		var sortOrder = getSortOrder();

		post({action:'get_content',category:category,newApp:newApp,sortOrder:sortOrder,startupDisplay:startupDisplay},function(result) {
			updateDisplay(result.display);

			if ( initialize ) {
				populateAutoComplete();
			}
		});
	}
	$('.dockerSearch').hide();
}

function populateAutoComplete() {
	post({action:'populateAutoComplete'},function(result) {
		searchBoxAwesomplete.list = result.autocomplete;
		searchBoxAwesomplete.maxItems = 20;
		Awesomplete.$('#searchBox').removeEventListener('awesomplete-selectcomplete',awesompleteSearch);
		Awesomplete.$('#searchBox').addEventListener('awesomplete-selectcomplete',awesompleteSearch);
	});
}

function awesompleteSearch() {
	doSearch(false);
}

function mySearch(filter) {
	filter = filter.replace(/<(?:.|\n)*?>/gm, '');
	$('#searchBox').val(filter);

	if ( $("#searchButton").hasClass('fa-search') ) {
		$('#searchButton').toggleClass('fa-search fa-remove');
	}
	initDockerSearch(1);
}

function initDockerSearch() {
	dockerSearch(1);
	data.docker = "searching docker";
	data.section = "";
	data.selected_category = "";
	$(".selectedMenu").removeClass("selectedMenu");
	hideSortIcons();
	$(".subCategory").hide();
}

function dockerSearch(pageNumber) {
	var filter = $('#searchBox').val();
	var dockerURL = "https://registry.hub.docker.com/search?q=" + filter;
	data.docker = "searching docker";
	enableIcon("#sortIcon",false);
	$(".dockerSearch,.multi_installDiv").hide();
	$("#Category").html(sprintf(tr("DockerHub Search for %s"),filter)+" <span id='pageNumber'></span>");
	var sortOrder = getSortOrder();
	post({action:'search_dockerhub',filter:filter,page:pageNumber,sortOrder:sortOrder},function(result) {
		updateDisplay(result.display);
	});
}

function dockerConvert(dockerID) {
	post({action:'convert_docker',ID:dockerID},function(result) {
		myCloseAlert();
		templateURL = "/Apps/AddContainer?xmlTemplate=default:" + $.trim(result.xml);
		openNewWindow(templateURL);
	});
}

function openNewWindow(newURL) {
	var popUp = window.open(newURL,"_self");
	if ( !popUp || popUp.closed || typeof popUp == "undefined" ) {
		addBannerWarning(tr("Popup Blocked.  CA requires popups to be enabled under certain circumstances.  You must white list your server within your browser to allow popups"),true,true);
	}
}

function clearSearchBox() {
	$("#searchBox").val("");
	if ($('#searchButton').hasClass('fa-remove')) {
		$('#searchButton').toggleClass('fa-remove fa-search');
	}
}

function installPlugin(pluginURL) {
	disableSearch();
	my_openBox('/plugins/community.applications/scripts/pluginInstall.sh&arg1=install&arg2='+pluginURL,tr('Install Plugin'),600,900,true,"refreshDisplay()");
}

function my_openBox(cmd,title,height,width,load,func) {
	// open shadowbox window (run in foreground)
	var run = cmd.split('?')[0].substr(-4)=='.php' ? cmd : '/logging.htm?cmd='+cmd+'&csrf_token=<?=$var['csrf_token']?>';
	var options = load ? {modal:true,onClose:function(){ eval(func); }} : {modal:true};
	Shadowbox.open({content:run, player:'iframe', title:title, height:height, width:width, options:options});
}

function showDesc_openBox(cmd,title,height,width,load,func) {
	// open shadowbox window (run in foreground)
	var run = cmd.split('?')[0].substr(-4)=='.php' ? cmd : '/logging.htm?cmd='+cmd+'&csrf_token=<?=$var['csrf_token']?>';
	var options = load ? {modal:false,onClose:function(){ eval(func); }} : {modal:true};
	Shadowbox.open({content:run, player:'iframe', title:title, height:height, width:width, options:options});
}

function showModeration(script,title) {
	$("#sb-nav-close").css("visisbility","visible");
	showDesc_openBox("/plugins/<?=$plugin?>/scripts/showStatistics.php?arg1="+script,title,550,900,true,false);
}

function previousApps(installed,dontClear=false) {
	hideSortIcons();
	clearCategory();
	setPageOne();
	data.docker = "";

	clearSearchBox();
	$(".dockerSearch").hide();
	enableIcon("#sortIcon",true);

	post({action:'previous_apps',installed:installed},function(result) {
		if ( installed ) {
			$(".multi_installDiv").hide();
		} else {
			$(".multi_installDiv").show();
			if ( ! dontClear ) {
				clearMultiInstall();
			}
		}
		changeSortOrder(null,null,"true");
		saveState();
	});
}

function removeApp(application, humanName) {
	disableSearch();
	swal({
		title: tr("Delete Template?"),
		text: sprintf(tr("Are you sure you want to delete %s from the list of previously installed applications?"),"<font color='red'><strong><span class='ca_italic'>"+humanName+"</span></strong></font>")+"<br><font size='0'>"+application+"</font>",
		type: "warning",
		confirmButtonText: tr("Yes, delete it!"),
		cancelButtonText: tr("Cancel"),
		showCancelButton: true,
		showConfirmButton: true,
		allowOutsideClick: true,
		html: true
	}, function(isConfirm) {
		if (isConfirm) {
			$('input[type="checkbox"][data-humanName="'+humanName+'"]').prop("checked",false);			// remove the checkbox from the app
			enableMultiInstall(); // update the count
			post({action:'remove_application',application:application}, function(result) {
				enableSearch();
				previousApps(false,true);
			});
		} else {
			enableSearch();
		}
	});
}

function uninstallApp(application,humanName) {
	disableSearch();
	swal({
		title: tr("Uninstall Application?"),
		text: sprintf(tr("Are you sure you want to uninstall %s?"),"<font color='red'><strong><span class='ca_italic'>"+humanName+"</span></strong></font>"),
		type: "warning",
		showCancelButton: true,
		showConfirmButton: true,
		cancelButtonText: tr("Cancel"),
		confirmButtonText: tr("Yes uninstall it"),
		closeOnConfirm: true,
		showLoaderOnConfirm: false,
		allowOutsideClick: true,
		html: true
	}, function(isConfirm) {
		if (isConfirm) {
			application = application.basename();
			my_openBox('/plugins/community.applications/scripts/pluginInstall.sh&arg1=remove&arg2='+application,'Uninstall Plugin',600,900,true,"postUninstallPlugin()");
		} else {
			enableSearch();
		}
	});
}

function postUninstallPlugin() {
	previousApps(true);
	enableSearch();
}

String.prototype.basename = function() {
	return this.split('/').reverse()[0];
}

function deletePrivateApp(path,name,author) {
	var displayPath = path.replace("/boot/config/plugins/","...");
	disableSearch();
	swal({
		title: tr("Remove Private Application?"),
		text: sprintf(tr("Are you sure you want to remove the private application %s by %s?"),"<span class='ca_italic'><font color='red'><span class='ca_bold'>"+name+"</span></font>","<font color='red'><span class='ca_bold'>"+author+"</span></font>")+"<br><font size='0'>("+displayPath+")",
		type: "warning",
			showCancelButton: true,
			showConfirmButton: true,
			cancelButtonText: tr("Cancel"),
			confirmButtonText: tr("Yes, remove it!"),
			closeOnConfirm: false,
			showLoaderOnConfirm: true,
			allowOutsideClick: true,
			html: true
	}, function(isConfirm) {
		if ( isConfirm ) {
			swal(sprintf(tr("Removing %s"),name),"","info");
			getSelectedApps();
			post({action:'removePrivateApp',path:path,noSpinner:true},function(result) {
				getCategories();
				myCloseAlert();
				refreshDisplay();
				enableSearch();
			});
		} else {
			enableSearch();
		}
	});
}

function uninstallDocker(application,humanName) {
	disableSearch();
	swal({
		title: tr("Uninstall Application?"),
		text: sprintf(tr("Are you sure you want to uninstall %s?"),"<font color='red'><strong><span class='ca_italic'>"+humanName+"</span></strong></font>"),
		type: "warning",
		showCancelButton: true,
		showConfirmButton: true,
		cancelButtonText: tr("Cancel"),
		confirmButtonText: tr("Yes uninstall it"),
		closeOnConfirm: false,
		showLoaderOnConfirm: true,
		allowOutsideClick: true,
		html: true
	}, function( isConfirm ) {
		if ( isConfirm ) {
			myAlert("",sprintf(tr("Uninstalling %s"),humanName));
			post({action:'uninstall_docker',application:application,noSpinner:true},function(result) {
				enableSearch();
				previousApps(true);
			});
		} else {
			enableSearch();
		}
	});
}

function appStore() {
	data.nextpage = 0;
	data.prevpage = 0;
	initializeAppStore();
	updateContent();
	clearCategory();
	data.docker = "";
}

function initializeAppStore() {
	data.section = "AppStore";
	data.selected_category = "";
	$(".multi_installDiv").hide();
}

function checkPLGupdate() {
	var filename = data.plgfilename;
	post({action:'updatePLGstatus',filename:filename},function(result) {
		var pageNumber = data.currentpage;
		changePage(pageNumber);
	});
}

function pinApp(button,repository,name) {
	$(button).toggleClass("pinned unpinned");
	var pinned = ( $(button).hasClass("unpinned") ) ? tr("Click to pin this application") : tr("Click to unpin this application");
	$(button).tooltipster('content',pinned);
	post({action:'pinApp',repository:repository,name:name});
}

function setPageOne() {
	data.currentpage = 1;
}

function clearCategory() {
	$("#Category").html("");
}

function pinnedApps() {
	setPageOne();
	hideSortIcons();
	data.docker = "";
	clearSearchBox();
	clearCategory();
	$(".dockerSearch,.multi_installDiv").hide();
	enableIcon("#sortIcon",true);
	post({action:'pinnedApps'},function(result) {
		refreshDisplay();
		myCloseAlert();
	});
}

function displayTags(leadTemplate) {
	post({action:'displayTags',leadTemplate:leadTemplate,noSpinner:true},function(result) {
		disableSearch();
		swal({
			title: tr("Choose A Branch To Install"),
			text: result.tags,
			html: true,
			type: "warning",
			showCancelButton: true,
			showConfirmButton: false,
			cancelButtonText: tr("Cancel"),
			allowOutsideClick: true
		}, function(isConfirm) {
			if ( ! isConfirm ) {
				enableSearch();
			}
		});
	});
}

function xmlInstall(type,xml) {
	post({action:'createXML',xml:xml},function(result){
		if ( result.status == "ok" ) {
			openNewWindow("/Apps/AddContainer?xmlTemplate="+type+":"+xml);
		}
	});
}

function makePlural(string,count) {
	return ( (count > 1) || (count == 0) ) ? string + "s" : string;
}

function getSelectedApps() {
	if ( data.selected ) {
		var selected = JSON.parse(data.selected);
		var docker = selected.docker;
		var plugin = selected.plugin;
	} else {
		var selected = new Object();
		var docker = new Array();
		var plugin = new Array();
	}

	$(".ca_multiselect").each(function() {
		var name = $(this).attr("data-name");
		if ( $(this).is(':checked') ) {
			if ( $(this).attr("data-type") == "plugin" ) {
				plugin.push(name);
			} else {
				docker.push(name);
			}
		} else {
			var index = plugin.indexOf(name);
			if ( index > -1 ) {
				plugin.splice(index,1);
			}
			var index = docker.indexOf(name);
			if (index > -1 ) {
				docker.splice(index,1);
			}
		}
	});
	selected.docker = uniqueArrayElements(docker);
	selected.plugin = uniqueArrayElements(plugin);
	data.selected = JSON.stringify(selected);
	return selected;
}

function uniqueArrayElements(sourceArray) {
	var uniqueEntries = new Array();
	$.each(sourceArray, function(i, el) {
		if ($.inArray(el,uniqueEntries) === -1) {
			uniqueEntries.push(el)
		}
	});
	return uniqueEntries;
}

function enableMultiInstall() {
	var selected = getSelectedApps();
	var count = selected.plugin.length + selected.docker.length;
	if ( count == 0 ) {
		$(".multi_install,.multi_installClear").attr("disabled",true);
		$(".multi_installButton").val(tr("Install Selected Applications"));
	} else {
		$(".multi_install,.multi_installClear").attr("disabled",false);
		var buttonText = (count == 1) ? sprintf(tr("Install %s Selected Application"),count) : sprintf(tr("Install %s Selected Applications"),count);
		$(".multi_installButton").val(buttonText);
	}
	getSelectedApps();
}

function clearMultiInstall() {
	data.selected = "";
	$(".ca_multiselect").each(function() {
		$(this).prop("checked",false);
	});
	$(".multi_install,.multi_installClear").attr("disabled",true);
	enableMultiInstall();
}

function installSort(a,b) {
	if (a[0] === b[0]) {
		return 0;
	} else {
		return (a[0] < b[0]) ? -1 : 1;
	}
}
function installMulti() {
	var docker = new Array();
	var pluginArray = new Array();
	var plugin = "";
	var pluginCount = 0;
	var dockerCount = 0;
	var selected = getSelectedApps();
	var cookieWarning = "";

	$.each(selected.plugin,function(i,el) {
		pluginArray.push([el.basename().replace(".plg",""),el]);
		pluginCount += 1;
	});
// Sort them so that the install in the same order as if the system was booting.
// NOTE: The sort drops the .plg from the order so that UD+ winds up installing after UD.  This differs from the boot sequence.
	pluginArray.sort(installSort);
	if (pluginCount) {
		pluginArray.forEach( function(value) {
			plugin += value[1] + "*";
		});
	}

	$.each(selected.docker,function(i,el) {
		docker.push(el);
		dockerCount += 1;
	});
	disableSearch();
	if ( ! cookiesEnabled() && dockerCount && pluginCount ) {
		pluginCount = 0;
		cookieWarning = "<br>"+tr("Cookies not enabled.  Plugins must be separately installed from docker applications");
	}
	if ( (dockerCount + pluginCount) > 1 ) {
		var buttonText = tr("Yes, install them");
	} else {
		var buttonText = tr("Yes, install it");
	}
	var text = sprintf(tr("Are you sure you want to install %s docker and %s plugin application(s)?"),dockerCount,pluginCount);
	text = text.concat(dockerCount ? "<br><span class='ca_italic'>"+tr("Docker applications will be installed utilizing the most recently saved template with no user input on your part")+"</span>" : "");
	text = text.concat(cookieWarning ? "<br><font color='red'>"+cookieWarning+"</font>" : "");
	swal({
		title: dockerCount+pluginCount > 1 ? tr("Install Applications?") : tr("Install Application?"),
		text: text,
		type: "info",
		showCancelButton: true,
		cancelButtonText: tr("Cancel"),
		showConfirmButton: true,
		confirmButtonText: buttonText,
		closeOnConfirm: false,
		showLoaderOnConfirm: true,
		allowOutsideClick: true,
		html: true
	}, function( isConfirm ) {
		if ( isConfirm ) {
			myCloseAlert();
			if ( docker.length && plugin.length ) {
				$.cookie("ca_plugininstallpending",plugin);
			}
			if ( docker.length ) {
				$("#sb-nav-close").css("visibility","hidden"); // Because docker install cannot be aborted so why allow window to close
				openBox('/plugins/<?=$plugin?>/scripts/installMulti.php?plugin='+plugin+'&docker='+docker,tr('Install '+makePlural("Application",dockerCount)),600,1100,true);
			} else {
				openBox('/plugins/<?=$plugin?>/scripts/installMultiPlugin.sh&arg1='+plugin,tr('Install '+makePlural("Application",pluginCount)),600,900,true);
				enableSearch();
			}
		} else {
			enableSearch();
		}
	});
}

function updateDisplay(data) {
	$("#templates_content").html(data);
	setToolTip();
	enableSearch();
	$('img').on("error",function() {
		$(this).attr('src',"/plugins/dynamix.docker.manager/images/question.png");
	});
	saveState();
	myCloseAlert();
}


function saveState() {
	if ( ! dockerSearchFlag ) {
		console.log("Save State");
		$.cookie("ca_categoryText",$("#Category").html());
		$.cookie("ca_data",JSON.stringify(data));
		$.cookie("ca_dockerSearchFlag",dockerSearchFlag);
		$.cookie("ca_searchActive",data.searchActive);
		$.cookie("ca_installMulti",$(".multi_installDiv").is(":visible"));
		var selectedMenu = $(".selectedMenu").data("category");
		if ( ! selectedMenu ) {
			selectedMenu = "";
		}
		$.cookie("ca_selectedMenu",selectedMenu);
		$.cookie("ca_sortIcon",isIconEnabled("#sortIcon"));

		$(".sortIcons").each(function() {
			if ( isIconEnabled(this) ) {
				$.cookie("ca_sortButton",$(this).data("sort"));
			}
		});
	}
}

function restoreState() {
	swalBackground("transparent");

	console.log("Restore State");
	$.removeCookie("ca_languageSwitch",{path:'/'});

	$("#Category").html($.cookie("ca_categoryText"));
	if ( $.cookie("ca_installMulti") == "true" ) {
		$(".multi_installDiv").show();
	} else {
		$(".multi_installDiv").hide();
	}
	data = JSON.parse($.cookie("ca_data"));
	dockerSearchFlag = $.cookie("ca_dockerSearchFlag");
	data.searchActive = $.cookie("ca_searchActive");
	restoreStateMenu = $.cookie("ca_selectedMenu");

	var ca_sortIcon = $.cookie("ca_sortIcon");
	enableIcon("#sortIcon",ca_sortIcon);
	$(".sortIcons").each(function() {
		$(this).removeClass("enabledIcon");
	});
	if ( ! ca_sortIcon || ca_sortIcon == "false" ) {
		var selectedSort = "noSort";
		var sortIcon = "";
	} else {
		var selectedSort = $.cookie("ca_sortButton");
		var sortIcon = $.find(".sortIcons[data-sort='"+selectedSort+"']");
		$(sortIcon).addClass("enabledIcon");
		var classList = $(sortIcon).attr('class').split(/\s+/);
	}

	$.each(classList, function(index, item) {
		if ( item.startsWith("fa-") ) {
			$("#sortIcon").html("&nbsp;<span class="+item+"></span>");
		}
	});
	populateAutoComplete();
	getCategories();
}

function disableSearch() {
	$("#searchBox").prop("disabled",true);
}

function enableSearch() {
	$("#searchBox").prop("disabled",false);
}

function evaluateBoolean(str) {
	regex=/^\s*(true|1|on)\s*$/i
	return regex.test(str);
}

function cookiesEnabled() {
	return evaluateBoolean(navigator.cookieEnabled);
}

function showCredits() {
	$(".multi_installDiv,.dockerSearch").hide();
	clearCategory(); clearSearchBox();
	var credits = $('#caCredits').html();
	updateDisplay(credits);
}

function showStatistics() {
	$(".multi_installDiv,.dockerSearch").hide();
	clearCategory(); clearSearchBox();
	post({action:'statistics'},function(result) {
		updateDisplay(result.statistics);
	});
}

function caChangeLog() {
	$(".multi_installDiv,.dockerSearch").hide();
	clearCategory(); clearSearchBox();
	post({action:'caChangeLog'},function(result) {
		updateDisplay(result.changelog);
	});
}

function scrollToTop() {
	$('html,body').animate({scrollTop:0},0);
}



function addDockerWarning(enableDisable) {
	if (enableDisable) {
		if ( dockerWarningAdded === false) {
			dockerWarningAdded = addBannerWarning(tr('Docker Service Not Enabled - Only Plugins Available To Be Installed Or Managed'));
		}
	} else {
		if ( dockerWarningAdded !== false ) {
			removeBannerWarning(dockerWarningAdded);
			dockerWarningAdded = false;
		}
	}
}

String.prototype.escapeHTML = function() {
	return this.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

function post(options,callback) {
	var URL = "/plugins/<?=$plugin?>/include/exec.php";

	if ( typeof options === "function" ) {
		callback = options;
	} else {
		var msg = postCount > 0 ? "Embedded Post: " : "Post: ";
		console.log(msg+JSON.stringify(options));
	}

	if ( postCount == 0 && ! options.noSpinner ) {
		mySpinner();
	}
	postCount++;
	console.log("Post Count: "+postCount);
	if ( typeof callback === "function" ) {
		$.post(URL,options,function(retval){
			try {
				var result = JSON.parse(retval);
				if (result.error) {
					alert(result.error);
				}
			} catch(e) {
				myCloseAlert();
				myCloseSpinner();
				if ( ! $.trim(retval) ) {
					retval = tr("No data was returned.  It is probable that another browser session has rebooted your server.  Reloading this browser tab will probably fix this error");
				}
				$("#templates_content").html(sprintf(tr("Something really wrong went on during %s"),options.action)+"<br>"+tr("Post the ENTIRE contents of this message in the Community Applications Support Thread")+"<br><br>"+retval.escapeHTML());
				throw new Error("Something went badly wrong!");
			}
			console.groupCollapsed("Result "+options.action);
			console.log(result);
			console.groupEnd();
			eval(callback(result));
			if (result.script) {
				try {
					eval(result.script);
				} catch(e) {
					alert("Could not execute Script "+e);
				}
			}
			postCount--;
			if (postCount < 0) postCount = 0;
			if ( postCount == 0 && ! options.noSpinner) {
				myCloseSpinner();
			}
		});
	} else {
		$.post(URL,options);
		postCount--;
		if ( postCount < 0 ) postCount = 0;
		if ( postCount == 0) {
			myCloseSpinner();
		}
	}
	if ( ! cookiesEnabled() ) {
		if ( cookieWarning === false) {
			cookieWarning = addBannerWarning(tr("Community Applications works best when cookies are enabled in your browser.  Certain features may not be available."));
		}
	} else {
		if ( cookieWarning !== false ) {
			removeBannerWarning(cookieWarning);
			cookieWarning = false;
		}
	}
}

function getCategories() {
	post({action:'get_categories'},function(result) {
		$("#category_list").html(result.categories);
		if ( restoreStateMenu ) {
			console.log(restoreStateMenu);
			if ( restoreStateMenu && ! evaluateBoolean(data.searchFlag) ) {
				var menuItem = $.find(".caMenuItem[data-category='"+restoreStateMenu+"']");
				$(".caMenuItem").each(function(){
					$(this).removeClass("selectedMenu");
				});
				$(menuItem).addClass("selectedMenu");
				$(menuItem).parent().show();
				$(menuItem).next().show();
				restoreStateMenu = false;
			}
		}
	});
}

function feedWarning(currentServer) {
	if ( currentServer != "Primary Server" ) {
		if ( currentServer == "" ) {
			addBannerWarning(tr("Unknown error happened.  Please post a screenshot in the support thread of the Statistics screen"));
		} else {
				if ( !backupServerWarning ) {
				backupServerWarning = addBannerWarning(tr("Backup Server Active.  Some icons may not appear, and plugin installations may be affected"),true,true);
			} else {
				removeBannerWarning(backupServerWarning);
				backupServerWarning = false;
			}
		}
	} else if ( backupServerWarning ) {
		removeBannerWarning(backupServerWarning);
		backupServerWarning = false;
	}
}

function tr(string) {
	<?if ( $translations ): ?>
		return _(string);
	<?else:?>
		return string;
	<?endif;?>
}

function CAswitchLanguage(language) {
	$.cookie('locale','<?=$locale?>',{path:'/'}); // save the previous locale
	post({action:'switchLanguage',language:language},function(result) {
		data.searchActive = true; // so the system doesn't resort
		saveState();
		$.cookie("ca_languageSwitch","switched",{expires:365,path:'/'});
		myCloseSpinner();
		window.location.reload();
	});
}
function installLanguage(languageURL,language) {
	disableSearch();
	my_openBox('/plugins/community.applications/scripts/languageInstall.sh&arg1=install&arg2='+languageURL,tr('Install Language Pack'),600,900,true,"refreshDisplay();");
}

function updateLanguage(language) {
	disableSearch();
	my_openBox('/plugins/community.applications/scripts/languageInstall.sh&arg1=update&arg2='+language,tr('Update Language Pack'),600,900,true,"refreshDisplay();");
}
function removeLanguage(language) {
	my_openBox('/plugins/community.applications/scripts/languageInstall.sh&arg1=remove&arg2='+language,tr('Remove Language Pack'),600,900,true,"refreshDisplay();");
}

</script>

> <i class='fa fa-sort enabledIcon' aria-hidden='true' style='font-size:2rem;'></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<?tr("This chooses how to sort the results");?><br><br>
> <i class='fa fa-download' aria-hidden='true' style='font-size:2rem;'></i> <i class='fa fa-edit' aria-hidden='true' style='font-size:2rem;'></i> &nbsp;&nbsp;<?tr("These icons respectively will **Install or Edit** an application");?><br>
> <i class='fa fa-globe' aria-hidden='true' style='font-size:2rem;'></i> <i class='fa fa-cog' aria-hidden='true' style='font-size:2rem;'></i> &nbsp;&nbsp;&nbsp;<?tr("Clicking these icons will take you to an application's GUI or settings");?><br>
> <i class='fa fa-cloud-download' aria-hidden='true' style='font-size:2rem;'></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<?tr("This will update an application");?><br>
> <span class='ca_fa-switchto' style='font-size:2rem;'></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<?tr("This will immediately switch to the language");?><br>
> <span class='ca_fa-support' style='font-size:2rem;'></span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<?tr("This will take you to the appropriate support thread for an application");?><br>
> <span class='ca_fa-project' style='font-size:2rem;'></span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<?tr("This will take you to the project page for an application");?><br>
> <i class='fa fa-window-close' aria-hidden='true' style='font-size:2rem;color:maroon;'></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<?tr("Clicking this icon will uninstall the application or delete it from the lists depending upon your current section");?><br>
> <span class='unpinned'> </span><span class='pinned'></span> &nbsp;&nbsp;<?tr("Clicking these icons will pin or unpin an application for later viewer from the Pinned Apps section");?><br>
> <i class='fa fa-info-circle' aria-hidden='true' style='font-size:2rem;'></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<?tr("Clicking this will display more information about the application.  NOTE: You can also click on the application's icon to display more information.");?><br>
> <i class='fa fa-exclamation-triangle' aria-hidden='true' style='font-size:2rem;'></i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<?tr("Clicking this will display any warnings or extra comments about the application");?><br>
> <input type='checkbox' checked> &nbsp;&nbsp;&nbsp;<?tr("On the previous apps section you can select multiple applications to install simultaneously");?><br>
> <span class='ca_thumbsup' style='margin-left:0px; font-size:2rem;'></span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<?tr("This is the recommended version to install by the application author themselves");?><br>
> <center><?tr("For support for this plugin visit");?> <a href='https://lime-technology.com/forums/topic/38582-plug-in-community-applications/' target='_blank'><?tr("Click here");?></a></center>
>
> <?tr("To view the policies Community Applications has");?> <a href='https://forums.unraid.net/topic/87144-ca-application-policies/' target='_blank'><?tr("Click here");?></a>


<?include "/usr/local/emhttp/plugins/$plugin/skins/Narrow/skin.html"?>
